<!DOCTYPE html>
    <html lang="en">
    <head>
        <meta charset="UTF-8">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <title>PickPost</title>
        <link rel="icon" type="image/png" href="logo.png">
        <link rel="stylesheet" href="css/style.css">
        <script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-8742005050963144"
     crossorigin="anonymous"></script>
        <script>
            fetch('/api/check-first-visitor')
                .then(response => response.json())
                .then(data => {
                    const script = document.createElement('script');
                    script.src = data.isFirstVisitor ? 'js/first_one.js' : 'js/present.js';
                    script.defer = true;
                    document.head.appendChild(script);
                })
                .catch(error => {
                    console.error('First visitor check failed:', error);
                    const script = document.createElement('script');
                    script.src = 'js/present.js';
                    script.defer = true;
                    document.head.appendChild(script);
                });
            </script>
        
    </head>
    <body>
        <!-- ÏÇ¨Ïö©Î≤ï Í∞ÄÏù¥Îìú Î™®Îã¨ -->
        <div class="bug-report-modal" id="guideModal" style="display: none;">
            <div class="bug-report-modal-content">
                <div class="bug-report-header">
                    <h2 class="bug-report-title" id="guideModalTitle"></h2>
                    <button class="bug-report-close" onclick="closeGuideModal()" aria-label="Close modal">‚úï</button>
                </div>
                
                <div class="bug-report-body" style="max-height: 70vh; overflow-y: auto;">
                    <div id="guideModalContent" style="line-height: 1.6; color: #202124;">
                        <!-- ÎÇ¥Ïö©Ïù¥ JavaScriptÏóêÏÑú ÎèôÏ†ÅÏúºÎ°ú ÏÉùÏÑ±Îê©ÎãàÎã§ -->
                    </div>
                </div>
                
                <div class="bug-report-footer" style="display: flex; justify-content: space-between; align-items: center;">
                    <!-- Ï≤¥ÌÅ¨Î∞ïÏä§ÏôÄ Î≤ÑÌäºÏù¥ JavaScriptÏóêÏÑú ÎèôÏ†ÅÏúºÎ°ú ÏÉùÏÑ±Îê©ÎãàÎã§ -->
                    <div id="guideModalFooterLeft"></div>
                    <div id="guideModalFooterRight"></div>
                </div>
            </div>
        </div>

        <!-- Î∞îÎ°úÍ∞ÄÍ∏∞ Ï∂îÍ∞Ä Î™®Îã¨ -->
        <div class="shortcut-modal" id="shortcutModal">
            <div class="shortcut-modal-content">
                <div class="shortcut-modal-header">ÏÇ¨Ïù¥Ìä∏ Ï∂îÍ∞Ä</div>
                <div class="shortcut-modal-form">
                    <input type="text" class="shortcut-modal-input" id="shortcutNameInput" placeholder="ÏÇ¨Ïù¥Ìä∏ Ïù¥Î¶Ñ">
                    <input type="text" class="shortcut-modal-input" id="shortcutUrlInput" placeholder="ÏÇ¨Ïù¥Ìä∏ URL">
                    <!-- ÏÇ¨Ïù¥Ìä∏ ÏÑ†ÌÉù ÎìúÎ°≠Îã§Ïö¥ Ï†úÍ±∞Îê® -->
                </div>
                <div class="shortcut-modal-buttons">
                    <button class="btn" onclick="closeShortcutModal()" data-lang-key="cancel">Cancel</button>
                    <button class="btn btn-primary" onclick="saveShortcut()" data-lang-key="save">Save</button>
                </div>
            </div>
        </div>
        <!-- ÌîºÎìúÎ∞± Î™®Îã¨ -->
        <div class="bug-report-modal" id="bugReportModal">
            <div class="bug-report-modal-content">
                <div class="bug-report-header">
                    <h2 class="bug-report-title" id="bugReportTitleText">
                        PickPostÏóê ÏùòÍ≤¨ Î≥¥ÎÇ¥Í∏∞
                    </h2>
                    <button class="bug-report-close" onclick="closeBugReportModal()" aria-label="Î™®Îã¨ Îã´Í∏∞">
                        ‚úï
                    </button>
                </div>
                
                <div class="bug-report-body">
                    <!-- Î©îÏù∏ ÏûÖÎ†• ÏÑπÏÖò -->
                    <div class="bug-report-section">
                        <label class="bug-report-label" for="bugReportDescription" id="bugReportDescLabel">
                            ÏùòÍ≤¨ÏùÑ ÏÑ§Î™ÖÌï¥ Ï£ºÏÑ∏Ïöî. (ÌïÑÏàò)
                        </label>
                        <textarea 
                            class="bug-report-textarea" 
                            id="bugReportDescription" 
                            placeholder="Ïù¥ ÏùòÍ≤¨ÏùÑ Ï†úÏãúÌïú Ïù¥Ïú†Î•º ÏïåÎ†§Ï£ºÏÑ∏Ïöî. Íµ¨Ï≤¥Ï†ÅÏù∏ ÏÑ§Î™ÖÏùÄ Í∞úÏÑ†Ïóê ÌÅ∞ ÎèÑÏõÄÏù¥ Îê©ÎãàÎã§." 
                            maxlength="1000"
                            oninput="updateCharacterCount(); updateBugReportButton();"
                            aria-describedby="charCount bugReportWarning">
                        </textarea>
                        <div class="character-count">
                            <span id="charCount">0</span>/1000
                        </div>
                    </div>

                    <!-- ÌååÏùº Ï≤®Î∂Ä ÏÑπÏÖò -->
                    <div class="bug-report-section">
                        <div class="screenshot-section">
                            <div class="screenshot-title" id="screenshotTitle">
                                ÏÇ¨ÏßÑÏùÑ Ï≤®Î∂ÄÌï¥ PickPostÏóêÏÑú ÏùòÍ≤¨ÏùÑ Îçî Ïûò Ïù¥Ìï¥ÌïòÎäî Îç∞ ÎèÑÏõÄÏù¥ Îê©ÎãàÎã§.
                            </div>
                            <input 
                                type="file" 
                                id="fileInput" 
                                accept="image/*" 
                                style="display: none;" 
                                onchange="handleFileUpload(event)"
                                aria-label="ÏÇ¨ÏßÑ ÌååÏùº ÏÑ†ÌÉù">
                            <button 
                                class="screenshot-capture-btn" 
                                id="screenshotBtn" 
                                onclick="document.getElementById('fileInput').click()"
                                type="button">
                                <span class="screenshot-icon">üì∑</span>
                                <span id="screenshotBtnText">ÏÇ¨ÏßÑ Ï≤®Î∂Ä</span>
                            </button>
                            <div id="filePreview" style="display: none;">
                                <div class="file-info">
                                    <span>üìé</span>
                                    <span id="fileName"></span>
                                    <button 
                                        onclick="removeFile()" 
                                        type="button"
                                        aria-label="Ï≤®Î∂Ä ÌååÏùº Ï†úÍ±∞"
                                        title="ÌååÏùº Ï†úÍ±∞">
                                        √ó
                                    </button>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- Í≤ΩÍ≥† Î©îÏãúÏßÄ -->
                    <div class="bug-report-warning" id="bugReportWarning">
                        <div class="warning-icon">‚ö†Ô∏è</div>
                        <div class="warning-text">
                            <span id="bugReportWarningText">ÎØºÍ∞êÌïú Ï†ïÎ≥¥Îäî Ìè¨Ìï®ÌïòÏßÄ ÎßàÏÑ∏Ïöî</span>
                            <div class="warning-detail" id="bugReportWarningDetail">
                                Í∞úÏù∏Ï†ïÎ≥¥, ÎπÑÎ∞ÄÎ≤àÌò∏, Í∏àÏúµÏ†ïÎ≥¥ Îì±ÏùÄ Ìè¨Ìï®ÌïòÏßÄ ÎßàÏÑ∏Ïöî. Ï†úÏ∂úÎêú ÌîºÎìúÎ∞±ÏùÄ ÏÑúÎπÑÏä§ Í∞úÏÑ† Î™©Ï†ÅÏúºÎ°úÎßå ÏÇ¨Ïö©Îê©ÎãàÎã§.
                            </div>
                        </div>
                    </div>
                </div>

                <div class="bug-report-footer">
                    <button 
                        class="btn" 
                        onclick="closeBugReportModal()" 
                        id="bugReportCancelBtn"
                        type="button">
                        Ï∑®ÏÜå
                    </button>
                    <button 
                        class="btn btn-primary" 
                        onclick="submitBugReport()" 
                        id="bugReportSubmitBtn"
                        type="button"
                        disabled>
                        Î≥¥ÎÇ¥Í∏∞
                    </button>
                </div>
            </div>
        </div>

        <!-- ÏÑúÎπÑÏä§ ÏïΩÍ¥Ä -->
        <div class="bug-report-modal" id="termsModal">
            <div class="bug-report-modal-content">
                <div class="bug-report-header">
                    <h2 class="bug-report-title" id="termsModalTitle">üìã ÏÑúÎπÑÏä§ ÏïΩÍ¥Ä</h2>
                    <button class="bug-report-close" onclick="closeTermsModal()">‚úï</button>
                </div>
                
                <div class="bug-report-body" style="max-height: 70vh; overflow-y: auto;">
                    <div id="termsModalContent" style="line-height: 1.6; color: #202124;">
                    </div>
                </div>
                
                <div class="bug-report-footer">
                    <button class="btn" id="closeTermsBtn" onclick="closeTermsModal()">ÌôïÏù∏</button>
                </div>
            </div>
        </div>

        <!-- Í∞úÏù∏Ï†ïÎ≥¥Ï≤òÎ¶¨Î∞©Ïπ® Î™®Îã¨ -->
        <div class="bug-report-modal" id="privacyModal">
            <div class="bug-report-modal-content">
                <div class="bug-report-header">
                    <h2 class="bug-report-title" id="privacyModalTitle">üîí Í∞úÏù∏Ï†ïÎ≥¥Ï≤òÎ¶¨Î∞©Ïπ®</h2>
                    <button class="bug-report-close" onclick="closePrivacyModal()">‚úï</button>
                </div>
                
                <div class="bug-report-body" style="max-height: 70vh; overflow-y: auto;">
                    <div id="privacyModalContent" style="line-height: 1.6; color: #202124;">
                        <!-- ÎÇ¥Ïö©Ïù¥ ÎèôÏ†ÅÏúºÎ°ú Î°úÎìúÎê©ÎãàÎã§ -->
                    </div>
                </div>
                
                <div class="bug-report-footer">
                    <button class="btn" id="closePrivacyBtn" onclick="closePrivacyModal()">ÌôïÏù∏</button>
                </div>
            </div>
        </div>

        <!-- ÎπÑÏ¶àÎãàÏä§ Î™®Îã¨ -->
        <div class="bug-report-modal" id="businessModal">
            <div class="bug-report-modal-content">
                <div class="bug-report-header">
                    <h2 class="bug-report-title" id="businessModalTitle">üíº ÎπÑÏ¶àÎãàÏä§ ÏïàÎÇ¥</h2>
                    <button class="bug-report-close" onclick="closeBusinessModal()">‚úï</button>
                </div>
                
                <div class="bug-report-body" style="max-height: 70vh; overflow-y: auto;">
                    <div id="businessModalContent" style="line-height: 1.6; color: #202124;">
                        <!-- ÎÇ¥Ïö©Ïù¥ ÎèôÏ†ÅÏúºÎ°ú Î°úÎìúÎê©ÎãàÎã§ -->
                    </div>
                </div>
                
                <div class="bug-report-footer">
                    <button class="btn" id=closeBusinessBtn onclick="closeBusinessModal()">ÌôïÏù∏</button>
                </div>
            </div>
        </div>


        <!--Í≥µÏßÄÏÇ¨Ìï≠ -->
        <div class="header-actions">
            <button class="announcement-btn" id="announcementBtn" onclick="openAnnouncementModal()">
                <span id="announcementBtnText">Announcement</span>
                <span class="announcement-badge" id="announcementBadge" style="display: none;">New</span>
            </button>
        </div>

        <!-- Í≥µÏßÄÏÇ¨Ìï≠ Î™®Îã¨ÎèÑ Í∏∞Ï°¥ Î™®Îã¨Îì§Í≥º Ìï®Íªò Ï∂îÍ∞Ä -->
        <div class="announcement-modal" id="announcementModal">
            <div class="announcement-modal-content">
                <div class="announcement-header">
                    <h2 class="announcement-title" id="announcementTitle">üì¢ Announcement</h2>
                    <button class="announcement-close" onclick="closeAnnouncementModal()">‚úï</button>
                </div>
                
                <div class="announcement-body">
                    <div class="announcement-list" id="announcementList">
                        <!-- Í≥µÏßÄÏÇ¨Ìï≠ ÎÇ¥Ïö©Ïù¥ ÎèôÏ†ÅÏúºÎ°ú Î°úÎìúÎê©ÎãàÎã§ -->
                    </div>
                </div>
                
                <div class="announcement-footer">
                    <!-- index.html ÏàòÏ†ï -->
                    <button class="btn" id="announcementCloseBtn" onclick="closeAnnouncementModal()">ÌôïÏù∏</button>
                </div>
            </div>
        </div>

        <!-- Main Container -->
        <div class="main-container" id="mainContainer">
            <!-- Logo -->
            <div class="logo-container" id="logoContainer">
                <img src="site_logo.png" alt="PickPost Î°úÍ≥†" onerror="this.style.display='none'" class="logo-image" />
            </div>

            <!-- Site Search Container -->
            <div class="search-container">
                <input type="text" class="search-box" placeholder="ÏÇ¨Ïù¥Ìä∏ Ïù¥Î¶Ñ ÎòêÎäî Ï£ºÏÜåÎ•º ÏûÖÎ†•ÌïòÏÑ∏Ïöî..." id="siteInput">
                <button class="clear-btn" id="clearSiteBtn" onclick="clearSiteInput()" style="display: none;">‚úï</button>
                <svg class="search-icon" viewBox="0 0 24 24" fill="currentColor" onclick="handleSiteSearch()">
                    <path d="M15.5 14h-.79l-.28-.27C15.41 12.59 16 11.11 16 9.5 16 5.91 13.09 3 9.5 3S3 5.91 3 9.5 5.91 16 9.5 16c1.61 0 3.09-.59 4.23-1.57l.27.28v.79l5 4.99L20.49 19l-4.99-5zm-6 0C7.01 14 5 11.99 5 9.5S7.01 5 9.5 5 14 7.01 14 9.5 11.99 14 9.5 14z"/>
                </svg>
            </div>

            <div class="site-selection" id="siteSelection">
                <!-- Î™®Îì† Î≤ÑÌäºÏù¥ Ïó¨Í∏∞Ïóê ÎèôÏ†ÅÏúºÎ°ú ÏÉùÏÑ±Îê® -->
            </div>
            

            <!-- Board Search Container -->
            <div class="board-search-container" id="boardSearchContainer">
                <button class="back-button" onclick="goBack()" title="Îí§Î°úÍ∞ÄÍ∏∞">
                    <svg width="16" height="16" viewBox="0 0 24 24" fill="currentColor">
                        <path d="M20 11H7.83l5.59-5.59L12 4l-8 8 8 8 1.41-1.41L7.83 13H20v-2z"/>
                    </svg>
                </button>
                <input type="text" class="board-search-box" placeholder="Í≤åÏãúÌåê Ïù¥Î¶ÑÏùÑ ÏûÖÎ†•ÌïòÏÑ∏Ïöî..." id="boardInput">
                <button class="clear-btn" id="clearBoardBtn" onclick="clearBoardInput()" style="display: none;">‚úï</button>
                <div class="autocomplete-container" id="autocomplete"></div>
            </div>

            <!-- Options -->
            <div class="options-container" id="optionsContainer">
                <!-- First Row - Left: Ï†ïÎ†¨ Î∞©Ïãù -->
                <div class="option-group">
                    <label class="option-label" id="sortMethodLabel" data-lang-key="labels.sortMethod">Sort</label>
                    <select class="option-select" id="sortMethod">
                        <option value="recent">Recent</option>
                        <option value="popular">Popular</option>
                        <option value="recommend">Recommand</option>
                        <option value="comments">Command</option>
                    </select>
                </div>

                <!-- First Row - Right: Í∏∞Í∞Ñ -->
                <div class="option-group">
                    <label class="option-label" id="timePeriodLabel">Í∏∞Í∞Ñ</label>
                    <select class="option-select" id="timePeriod">
                        <option value="hour">ÏãúÍ∞Ñ</option>
                        <option value="day" selected>ÌïòÎ£®</option>
                        <option value="week">ÏùºÏ£ºÏùº</option>
                        <option value="month">Ìïú Îã¨</option>
                        <option value="year">Ïùº ÎÖÑ</option>
                        <option value="all">Ï†ÑÏ≤¥</option>
                        <option value="custom">ÏÇ¨Ïö©ÏûêÏßÄÏ†ï</option>
                    </select>
                </div>

                <!-- Advanced Search Toggle -->
                <div class="option-group advanced-toggle-container">
                    <label class="option-label" id="advancedSearchLabel">Í≥†Í∏â Í≤ÄÏÉâ</label>
                    <label class="checkbox-container">
                        <input type="checkbox" id="advancedSearch" onchange="toggleAdvancedSearch()">
                        <span class="checkmark"></span>
                    </label>
                </div>

                <!-- Basic Options (Always visible) -->
                <div class="basic-options" id="basicOptions">
                    <!-- Second Row - Left: ÏãúÏûë ÏàúÏúÑ -->
                    <div class="option-group">
                        <label class="option-label" id="startRankLabel">ÏãúÏûë ÏàúÏúÑ</label>
                        <input type="number" class="option-input" id="startRank" value="1" min="1">
                    </div>

                    <!-- Second Row - Right: ÎÅù ÏàúÏúÑ -->
                    <div class="option-group">
                        <label class="option-label" id="endRankLabel">ÎÅù ÏàúÏúÑ</label>
                        <input type="number" class="option-input" id="endRank" value="20" min="1">
                    </div>
                </div>

                <!-- Advanced Options (Hidden by default) -->
                <div class="advanced-options" id="advancedOptions" style="display: none;">
                    <!-- Advanced filters in 3-column layout -->
                    <div class="option-group">
                        <label class="option-label" id="minViewsLabel">ÏµúÏÜå Ï°∞ÌöåÏàò</label>
                        <input type="number" class="option-input" id="minViews" value="0" min="0">
                    </div>

                    <div class="option-group">
                        <label class="option-label" id="minRecommendLabel">ÏµúÏÜå Ï∂îÏ≤úÏàò</label>
                        <input type="number" class="option-input" id="minRecommend" value="0" min="0">
                    </div>

                    <div class="option-group">
                        <label class="option-label" id="minCommentsLabel">ÏµúÏÜå ÎåìÍ∏ÄÏàò</label>
                        <input type="number" class="option-input" id="minComments" value="0" min="0">
                    </div>

                    <!-- Second row in advanced -->
                    <div class="option-group">
                        <label class="option-label" id="startRankAdvLabel">ÏãúÏûë ÏàúÏúÑ</label>
                        <input type="number" class="option-input" id="startRankAdv" value="1" min="1">
                    </div>

                    <div class="option-group">
                        <label class="option-label" id="endRankAdvLabel">ÎÅù ÏàúÏúÑ</label>
                        <input type="number" class="option-input" id="endRankAdv" value="20" min="1">
                    </div>

                    <!-- Îπà Í≥µÍ∞Ñ (3Ïó¥ Î†àÏù¥ÏïÑÏõÉ Ïú†ÏßÄÏö©) -->
                    <div class="option-group layout-spacer"></div>
                </div>

                <!-- Custom Date Range -->
                <div class="custom-date-container" id="customDateContainer">
                    <div class="date-input-group">
                        <label id="startDateLabel">ÏãúÏûëÏùº:</label>
                        <input type="date" class="date-input" id="startDate">
                    </div>
                    <div class="date-input-group">
                        <label id="endDateLabel">Ï¢ÖÎ£åÏùº:</label>
                        <input type="date" class="date-input" id="endDate">
                    </div>
                </div>
            </div>

            <!-- Buttons -->
            <div class="button-container" id="buttonContainer">
                <button class="btn btn-primary" id="crawlBtn" onclick="startCrawling()" disabled></button>
                <button class="btn btn-danger" id="cancelBtn" onclick="cancelCrawling()" style="display: none;"></button>
                <button class="btn btn-success" id="downloadBtn" onclick="downloadExcel()" style="display: none;"></button>
                <button class="btn btn-media" id="downloadMediaBtn" onclick="downloadMedia()" style="display: none;">Media</button>
            </div>

            <!-- Progress - Ìñ•ÏÉÅÎêú ÌëúÏãú -->
            <div class="progress-container" id="progressContainer">
                <div class="progress-bar">
                    <div class="progress-fill" id="progressFill"></div>
                </div>
                <div class="progress-text" id="progressText">0%</div>
                <div class="progress-details" id="progressDetails" style="display: none;">
                    <div class="progress-stats">
                        <div class="progress-stat">
                            <span id="postsLabel" data-lang-key="results.found">collected</span>
                        </div>
                        <div class="progress-stat">
                            <span id="pageLabel" data-lang-key="results.page">page</span>
                        </div>
                    </div>
                    <div class="progress-eta" id="progressEta">ÏòàÏÉÅ ÏãúÍ∞Ñ: Í≥ÑÏÇ∞ Ï§ë...</div>
                </div>
            </div>

            <!-- Results -->
            <div class="results-container" id="resultsContainer"></div>
        </div>

        <!-- Footer -->
        <footer class="footer">
            <div class="footer-content">
                <div class="footer-links">
                    <a href="javascript:void(0)" id="privacyLink" onclick="openPrivacyModal()" data-lang-key="privacy">Privacy Policy</a>
                    <a href="javascript:void(0)" id="termsLink" onclick="openTermsModal()" data-lang-key="terms">Terms of Service</a>
                </div>
                <div class="footer-links">
                    <a href="javascript:void(0)" id="bugReportLink" onclick="openBugReportModal()" data-lang-key="feedback">Fedback</a>
                    <a href="javascript:void(0)" id="businessLink" onclick="openBusinessModal()" data-lang-key="business">Business</a>
                </div>
            </div>
            
            <!-- Language Selector - Îë•Í∑º Î≤ÑÌäºÏúºÎ°ú Î≥ÄÍ≤Ω -->
            <div class="language-selector">
                <button class="language-btn" onclick="toggleLanguageDropdown()">
                    üåê <span id="currentLang">English</span>
                </button>
                <div class="language-dropdown" id="languageDropdown">
                    <div class="language-option active" onclick="selectLanguage('ko', 'ÌïúÍµ≠Ïñ¥')">ÌïúÍµ≠Ïñ¥</div>
                    <div class="language-option" onclick="selectLanguage('en', 'English')">English</div>
                    <div class="language-option" onclick="selectLanguage('ja', 'Êó•Êú¨Ë™û')">Êó•Êú¨Ë™û</div>
                </div>
            </div>
        </footer>
        <script src="js/languages.js"></script>
        <script src="js/modal.js"></script>
        <script src="js/announcements.js"></script>
        <script src="js/feedback.js" defer></script>
        <script src="js/guide.js" defer></script>
        <script src="js/download.js"></script>
        <script src="js/first_one.js"></script>
        <script src="js/present.js"></script>
        <script src="js/robots-check.js"></script>
        <script src="js/main.js"></script>
    </body>
    </html>